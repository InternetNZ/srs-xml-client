<NZSRSRequest VerMajor="{{ version_major }}" VerMinor="{{ version_minor }}">
  {% if cancel %}
    <ScheduleCancel ActionId="{{ action_id }}" ProcessName="{{ process_name }}"
                    {% if parameters %} Parameters="{{ parameters }}" {% endif %}>
      <FirstRunDate Year="{{ first_run.year }}" Month="{{ first_run.month }}" Day="{{ first_run.day }}" Hour="{{ first_run.hour }}" Minute="{{ first_run.minute }}" Second="{{ first_run.second }}" {% if first_run.time_zone %} TimeZoneOffset="{{ first_run.time_zone }}" {% endif %}/>
      {% if audit_text %} <AuditText>{{ audit_text }}</AuditText> {% endif %}
    </ScheduleCancel>
  {% else %}
    <ScheduleUpdate ActionId="{{ action_id }}" ProcessName="{{ process_name }}"
                    {% if frequency %} Frequency="{{ frequency }}" {% endif %}
                    {% if parameters %} Parameters="{{ parameters }}" {% endif %}>
      <FirstRunDate Year="{{ first_run.year }}" Month="{{ first_run.month }}" Day="{{ first_run.day }}" Hour="{{ first_run.hour }}" Minute="{{ first_run.minute }}" Second="{{ first_run.second }}" {% if first_run.time_zone %} TimeZoneOffset="{{ first_run.time_zone }}" {% endif %}/>
      {% if last_run %}
        <LastRunDate Year="{{ last_run.year }}" Month="{{ last_run.month }}" Day="{{ last_run.day }}" Hour="{{ last_run.hour }}" Minute="{{ last_run.minute }}" Second="{{ last_run.second }}" {% if last_run.time_zone %} TimeZoneOffset="{{ last_run.time_zone }}" {% endif %}/>
      {% endif %}
      {% if audit_text %} <AuditText>{{ audit_text }}</AuditText> {% endif %}
    </ScheduleUpdate>
  {% endif %}
</NZSRSRequest>
